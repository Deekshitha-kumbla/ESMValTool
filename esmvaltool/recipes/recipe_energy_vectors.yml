---
documentation:
  description: 'Energy vectors precipitation'
  authors: ['demory_marie-estelle']
  projects: [primavera]
  references: ['contact_authors']
  mantainer: [vegas-regidor_javier]

datasets:
  - &cmip {activity: CMIP, dataset: AWI-CM-1-1-MR,  project: CMIP6, mip: day, exp: historical, ensemble: r1i1p1f1, grid: gr,  start_year: 1979,  end_year: 2014}
  - {<<: *cmip, dataset: AWI-CM-1-1-MR,  ensemble: "r[2:5]i1p1f1"}
  - {<<: *cmip, dataset: BCC-CSM2-MR, ensemble: 'r[1:3]i1p1f1'}
  - {<<: *cmip, dataset: BCC-CSM2-MR,  ensemble: r2i1p1f1}
  - {<<: *cmip, dataset: BCC-CSM2-MR,  ensemble: r3i1p1f1}
  - {<<: *cmip, dataset: BCC-ESM1, ensemble: 'r[1:3]i1p1f1'}
  - {<<: *cmip, dataset: CAMS-CSM1-0}
  - {<<: *cmip, dataset: FGOALS-f3-L}
  - {<<: *cmip, dataset: FGOALS-f3-L,  ensemble: r2i1p1f1}
  - {<<: *cmip, dataset: FGOALS-f3-L,  ensemble: r3i1p1f1}
  - {<<: *cmip, dataset: CanESM5,  ensemble: "r[1:25]i1p1f1"}
  - {<<: *cmip, dataset: CNRM-CM6-1,  ensemble: "r[1:10]i1p1f2"}
  - {<<: *cmip, dataset: CNRM-ESM2-1,  ensemble: 'r[1:5]i1p1f2'}
  - {<<: *cmip, dataset: E3SM-1-0}
  - {<<: *cmip, dataset: EC-Earth3, institute: EC-Earth-Consortium}
  - {<<: *cmip, dataset: EC-Earth3, ensemble: r2i1p1f1, institute: EC-Earth-Consortium}
  - {<<: *cmip, dataset: EC-Earth, ensemble: r24i1p1f1, institute: EC-Earth-Consortium}
  - {<<: *cmip, dataset: EC-Earth3-Veg, institute: EC-Earth-Consortium}
  - {<<: *cmip, dataset: IPSL-CM6A-LR, ensemble: 'r[1:30]i1p1f1'}
  - {<<: *cmip, dataset: MIROC6, ensemble: 'r[1:10]i1p1f1'}
  - {<<: *cmip, dataset: HadGEM3-GC31-LL, ensemble: 'r[1:4]i1p1f1'}
  - {<<: *cmip, dataset: UKESM1-0-LL, ensemble: 'r[1:9]i1p1f1'}
  - {<<: *cmip, dataset: MRI-ESM2-0, ensemble: 'r[1:13]i1p1f1'}
  - {<<: *cmip, dataset: GISS-E2-1-G, ensemble: 'r[1:10]i1p1f1'}
  - {<<: *cmip, dataset: GISS-E2-1-H, ensemble: 'r[1:10]i1p1f1'}
  - {<<: *cmip, dataset: CESM2, ensemble: 'r[1:10]i1p1f1'}
  - {<<: *cmip, dataset: CESM2-WACCM, ensemble: 'r[1:3]i1p1f1'}
  - {<<: *cmip, dataset: GFDL-AM4}
  - {<<: *cmip, dataset: GFDL-CM4}
  - {<<: *cmip, dataset: GFDL-ESM4}
  - {<<: *cmip, dataset: NESM3}
  - {<<: *cmip, dataset: SAM0-UNICON}

preprocessors:
  extract_200:
    extract_levels:
      levels: [20000,]
      scheme: nearest

  extract_850:
    extract_levels:
      levels: [85000,]
      scheme: nearest

diagnostics:
  energy_vectors:
    description: Energy vectors
    variables:
      ua:
        preprocessor: extract_200

      va:
        preprocessor: extract_200

    scripts:
      energy_vectors:
        script: energy_vectors/energy_vectors.py
        window: 10 # in days

  heat_flux:
    description: Energy vectors
    variables:
      va:
        preprocessor: extract_850

      ta:
        preprocessor: extract_850

    scripts:
      heat_flux:
        script: energy_vectors/heat_flux.py
        window: 10 # in days
