# ESMValTool
---
documentation:
  description: |
    This is an example recipe for a personal diagnostic.
    You can run any Python diagnostic of your choice
    without installing ESMValTool as developer or git pushing.
    Simply include the full path to your script of choice in script,
    see example /path/to/your/my_little_diagnostic.py
    An example personal diagnostic can be found in
    esmvaltool/diag_scripts/examples/my_little_diagnostic.py
  authors:
    - fuentes-franco_ramon

  maintainer:
    - vegas-regidor_javier

datasets:
  - &cmip {dataset: AWI-CM-1-1-MR, project: CMIP6, mip: day,
    ensemble: r1i1p1f1, exp: historical, grid: gn,
    start_year: 1979, end_year: 2014}
  - {<<: *cmip, dataset: AWI-CM-1-1-MR, ensemble: "r(2:5)i1p1f1"}
  - {<<: *cmip, dataset: BCC-CSM2-MR, ensemble: 'r(1:3)i1p1f1'}
  - {<<: *cmip, dataset: BCC-ESM1, ensemble: 'r(1:3)i1p1f1'}
  - {<<: *cmip, dataset: CAMS-CSM1-0}
  - {<<: *cmip, dataset: FGOALS-f3-L, ensemble: r(1:3)i1p1f1}
  - {<<: *cmip, dataset: CanESM5, ensemble: "r(1:25)i1p1f1"}
  - {<<: *cmip, dataset: CNRM-CM6-1, ensemble: "r(1:10)i1p1f2"}
  - {<<: *cmip, dataset: CNRM-ESM2-1, ensemble: 'r(1:5)i1p1f2'}
  - {<<: *cmip, dataset: E3SM-1-0}
  - {<<: *cmip, dataset: EC-Earth3}
  - {<<: *cmip, dataset: EC-Earth3, ensemble: r2i1p1f1}
  - {<<: *cmip, dataset: EC-Earth, ensemble: r24i1p1f1}
  - {<<: *cmip, dataset: EC-Earth3-Veg}
  - {<<: *cmip, dataset: IPSL-CM6A-LR, ensemble: 'r(1:30)i1p1f1'}
  - {<<: *cmip, dataset: MIROC6, ensemble: 'r(1:10)i1p1f1'}
  - {<<: *cmip, dataset: HadGEM3-GC31-LL, ensemble: 'r(1:4)i1p1f1'}
  - {<<: *cmip, dataset: UKESM1-0-LL, ensemble: 'r(1:9)i1p1f1'}
  - {<<: *cmip, dataset: MRI-ESM2-0, ensemble: 'r(1:13)i1p1f1'}
  - {<<: *cmip, dataset: GISS-E2-1-G, ensemble: 'r(1:10)i1p1f1'}
  - {<<: *cmip, dataset: GISS-E2-1-H, ensemble: 'r(1:10)i1p1f1'}
  - {<<: *cmip, dataset: CESM2, ensemble: 'r(1:10)i1p1f1'}
  - {<<: *cmip, dataset: CESM2-WACCM, ensemble: 'r(1:3)i1p1f1'}
  - {<<: *cmip, dataset: GFDL-AM4}
  - {<<: *cmip, dataset: GFDL-CM4}
  - {<<: *cmip, dataset: GFDL-ESM4}
  - {<<: *cmip, dataset: NESM3}
  - {<<: *cmip, dataset: SAM0-UNICON}

  - &HighResMIP {dataset: HadGEM3-GC31-LM, project: CMIP6, mip: day,
            exp: highresSST-present, ensemble: r1i1p1f1, grid: gn,
            start_year: 1979, end_year: 2014}
  - {<<: *HighResMIP, dataset: HadGEM3-GC31-MM}
  - {<<: *HighResMIP, dataset: HadGEM3-GC31-HM}
  - {<<: *HighResMIP, dataset: HadGEM3-GC31-LL}
  - {<<: *HighResMIP, dataset: CMCC-CM2-HR4}
  - {<<: *HighResMIP, dataset: CMCC-CM2-VHR4}
  - {<<: *HighResMIP, dataset: CNRM-CM6-1, ensemble: r1i1p1f2}
  - {<<: *HighResMIP, dataset: CNRM-CM6-1-HR, ensemble: r1i1p1f2}
  - {<<: *HighResMIP, dataset: ECMWF-IFS-LR}
  - {<<: *HighResMIP, dataset: ECMWF-IFS-HR}
  - {<<: *HighResMIP, dataset: IPSL-CM6A-LR}
  - {<<: *HighResMIP, dataset: IPSL-CM6A-ATM-HR}
  - {<<: *HighResMIP, dataset: NICAM16-7S}
  - {<<: *HighResMIP, dataset: MPI-ESM1-2-HR}
  - {<<: *HighResMIP, dataset: MPI-ESM1-2-XR}
  - {<<: *HighResMIP, dataset: MRI-AGCM3-2-H}
  - {<<: *HighResMIP, dataset: MRI-AGCM3-2-S}
  - {<<: *HighResMIP, dataset: HadGEM3-GC31-HH}

preprocessors:
  extract:
    extract_region:
      start_latitude: 40
      end_latitude: 90
      start_longitude: 0
      end_longitude: 360

diagnostics:
  fresh_water:
    description: "Fresh water transport"
    variables:
      so:
        preprocessor: extract
        mip: Omon
      vo:
        preprocessor: extract
        mip: Omon
    scripts:
      fresh_water_transport:
        script: primavera/fresh_water_transport.py
        straits:
            BERINGSTRAIT: {latitude: [63.9, 67.3], longitude: [-174, -165]}
            FRAMSTRAIT: {latitude: [77, 78], longitude: [-20, 14]}
            GIN: {latitude: [65, 82], longitude: [-20, 14]}
            LABRADOR: {latitude: [45, 72], longitude: [-70, -40]}
            BARENTS: {latitude: [79.7, 80.3], longitude: [17.5, 52]}
            GREEN-ICE: {latitude: [64.6, 66], longitude: [-41, -21]}
            ICE-NORWAY: {latitude: [64.6, 65], longitude: [-15.7, 12.4]}
            NORTHBAFFIN: {latitude: [78, 79], longitude: [-78.4, -63]}
